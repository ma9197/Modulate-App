<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="WinUI_App.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:WinUI_App.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Grid Grid.Row="0" Padding="40,40,40,20" Background="{ThemeResource CardBackgroundFillColorDefaultBrush}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <TextBlock 
                    Text="Toxicity Reporter" 
                    Style="{StaticResource TitleTextBlockStyle}"/>
                <TextBlock 
                    x:Name="UserEmailText"
                    Text="Logged in as: user@example.com" 
                    Style="{StaticResource BodyTextBlockStyle}"
                    Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                    Margin="0,4,0,0"/>
            </StackPanel>

            <Button 
                Grid.Column="1"
                Content="Log Out"
                Click="LogoutButton_Click"
                VerticalAlignment="Center"/>
        </Grid>

        <!-- Main Content -->
        <Grid Grid.Row="1" Padding="40">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Status Message -->
            <InfoBar
                Grid.Row="0"
                x:Name="StatusBar"
                IsOpen="False"
                IsClosable="True"
                Margin="0,0,0,16"/>

            <!-- Recording Controls -->
            <StackPanel 
                Grid.Row="1"
                Spacing="16"
                Padding="24"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                CornerRadius="8"
                MaxWidth="800"
                HorizontalAlignment="Center">
                
                <TextBlock 
                    Text="Recording Controls" 
                    Style="{StaticResource SubtitleTextBlockStyle}"/>
                
                <TextBlock 
                    x:Name="RecordingStatusText"
                    Text="Not recording"
                    Style="{StaticResource BodyTextBlockStyle}"
                    Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button 
                        Grid.Column="0"
                        x:Name="StartRecordingButton"
                        Content="Start Recording"
                        HorizontalAlignment="Stretch"
                        Style="{StaticResource AccentButtonStyle}"
                        Click="StartRecordingButton_Click"
                        Padding="12,8"/>

                    <Button 
                        Grid.Column="2"
                        x:Name="StopRecordingButton"
                        Content="Stop Recording"
                        HorizontalAlignment="Stretch"
                        Click="StopRecordingButton_Click"
                        Padding="12,8"
                        IsEnabled="False"/>
                </Grid>

                <Button 
                    x:Name="FlagEventButton"
                    Content="Flag Event &amp; Upload (F9)"
                    HorizontalAlignment="Stretch"
                    Click="FlagEventButton_Click"
                    Padding="12,8"
                    IsEnabled="False"/>

                <ProgressRing 
                    x:Name="LoadingRing"
                    IsActive="False"
                    Width="40"
                    Height="40"
                    HorizontalAlignment="Center"/>

                <ProgressBar
                    x:Name="UploadProgressBar"
                    Minimum="0"
                    Maximum="100"
                    Value="0"
                    Visibility="Collapsed"
                    Height="6"
                    HorizontalAlignment="Stretch"/>
            </StackPanel>
        </Grid>
    </Grid>
</Page>

